<!DOCTYPE html>
<html lang="en">
<head>
    <script src="https://graceba.github.io/MolViewer/aframe.js"></script>
    <script src="https://graceba.github.io/MolViewer/aframe-ar.js"></script>

    <meta charset="UTF-8">
    <title>Miew via Global</title>

    <link rel="stylesheet" href="https://graceba.github.io/MolViewer/Miew/Miew.min.css">
    <style>
        .miew-container {
            position: absolute;
            top: 0;
            bottom: 0;
            right: 0;
            left: 0;
        }

        p {
            font-size: 24px;
        }
    </style>
</head>
<body>
    <a-scene id="currentScene" embedded arjs='sourceType: webcam; debugUIEnabled: false; detectionMode: mono_and_matrix; matrixCodeType: 3x3;' foo>

        <!-- *************************************************************************************************-->
        <!-- Custom js events -->
        <!-- *************************************************************************************************-->
        <script type="text/javascript">
            function loadViewer() {
                var viewer = new Miew({
                    container: document.getElementsByClassName('miew-container')[0],
                    settings: {
                        theme: 'light',
                        fps: false,
                        axes: false,
                        bg: { color: 0xffffff, transparent: true },
                    }
                });
                if (viewer.init()) {
                    viewer.run();
                }
                var file = document.getElementById("fileSelect").value;
                viewer.unload();
                viewer.load(file);
            }

        </script>

        <a-marker id="hexP" preset="custom" type="pattern" url="https://graceba.github.io/MolViewer/Markers/hexP.patt">
            <!-- Overlay object -->
            <a-box position="0 1 0" scale="1" id="hexPdna_chainA" opacity="0.2"></a-box>
        </a-marker>

        <!-- Initiate camera -->
        <a-entity camera></a-entity>

        <!-- OLD
        <a-marker id="hexP" preset="custom" type="pattern" url="https://graceba.github.io/MolViewer/Markers/hexP.patt">
            <!-- Overlay object
            <a-entity obj-model="obj: url(https://graceba.github.io/MolViewer/Models/dna_chainA.obj); mtl: url(https://graceba.github.io/MolViewer/Models/dna_chainA.mtl);" shadow="receive: false;" position="0 1 0" scale="1" id="hexPdna_chainA"></a-entity>
        </a-marker> -->
    </a-scene>

    <div class="miew-container" style="width:640px; height:480px"></div>

    <div style="position:fixed; top: 10px; left:10px">
        <input type="text" id="fileSelect" value="1crn" /> <br />
        <input type="button" value="load" id="fileChange" onclick="loadViewer()" /> <br />

        <script>
            // recognise text submission via Enter key -> For adding markers
            var pressEnter = document.getElementById("fileSelect");
            pressEnter.addEventListener("keyup", function (event) {
                if (event.keyCode === 13) {
                    document.getElementById("fileChange").click();
                }
            });
        </script>
    </div>


    <script src="https://unpkg.com/@babel/polyfill@7/dist/polyfill.min.js"></script>
    <script src="https://graceba.github.io/MolViewer/Miew/Miew.min.js"></script>

</body>
</html>
